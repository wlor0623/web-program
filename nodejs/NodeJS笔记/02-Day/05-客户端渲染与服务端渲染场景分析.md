# 客户端渲染与服务端渲染场景分析

* [1.1-客户端渲染与服务端渲染场景分析](#1.1)
* [1.2-实际案例分析](#1.2)

* 经过上一小节我们分别演示了客户端渲染和服务端渲染的使用，那么他们在用户的眼里看起来有什么区别呢？
    * ***1.客户端渲染，界面是局部刷新（url地址不变，只是数据异步刷新）***
    * ***2.服务端渲染，界面是全局刷新（url地址发生变化，虽然界面看起来结构一样，实际还是相同模板渲染出来的新页面）***

## <h2 id=1.1>1.1-客户端渲染与服务端渲染场景分析</h2>

* ***客户端渲染与服务端渲染，各有利弊，如何取舍需要根据实际的情况，根据优先级的排序，我们主要根据以下几种情况来取舍***

* 1.SEO搜索引擎优化：除了seo三大标签`TKD（title，keywords，description）`之外，其中`a`标签也是经常被爬虫爬到的。
    * 很显然，如果该界面或数据对SEO要求很高，则优先使用服务端渲染
        * ***如果你的网站不能被爬虫爬到，那么就无法推广用户，没有用户上帝的支持，就算你的界面做的再好年终奖一样拖行业后退***

* 2.性能问题：在哪一端渲染，哪一端的CPU计算量就会增大
    * 服务端渲染，增加了服务器压力
    * 客户端渲染，增加了客户端压力
    * 如果渲染的界面很复杂，优先考虑客户端渲染
        * ***因为客户端只是用户自己的一台电脑（现在电脑配置都很高，渲染一些负责界面毫无压力），而服务端则要响应所有的用户，当用户量过大时服务器可能就扛不住挂掉了（专业术语叫做`宕机`）***
    * ***特例：一般情况下，一个网站的首页一定是服务端渲染之后返回一个html界面的，这种情况称之为`首屏渲染`***
        * ***如果一个网站的首页非常的复杂，为了减轻服务器的压力，也会实行整体结构服务端渲染，然后部分数据使用客户端渲染来解决服务端的压力，这种场景称之为`首屏渲染优化`***

* 3.用户体验流畅性问题：单纯的从界面刷新来看，其实用户感觉不大（服务端渲染整个界面都刷新，客户端渲染只是刷新界面部分数据）
    * ***同样的html界面，服务端渲染的加载速度要比客户端渲染加载速度更快***
        * ***因为服务端渲染，浏览器加载的是一个完整的html，所以界面不会有异步加载的闪顿情况***

* 4.从代码维护角度
    * ***客户端渲染更好的体现了前后端分离（前端负责视图展示和交互，后端负责数据处理）的编程思想***
        * ***这种情况优先考虑客户端渲染，可以大大减轻服务端开发人员的工作量***
            * ***这样后台人员就可以专注于处理数据层次上的业务逻辑，而无需过多关心html模板中的逻辑***
        * ***码农的感受永远都是放在最后的~~***

## <h2 id=1.2>1.2-实际案例分析</h2>

![](images/0501.gif)

* 根据京东的案例，我们可以得出以下结论
    * 1.商品列表的下一页使用的是服务端渲染
        * ***整个界面刷新，而且url发生变化***
    * 2.评论列表的下一页使用的是客户端渲染
        * ***只有局部评论区域发生刷新，url固定不变***

* 为什么京东要这样设计呢？
    * SEO优先级最高考虑
        * 1.商品列表中包含大量的`a`标签，而且对于网站的盈利也是有帮助的
        * 2.评列表标对于seo没有什么帮助，使用客户端渲染可以减轻京东服务器压力
    * 性能角度
        * 1.很显然，商品列表渲染的性能要远大于评论列表，理论上来说更应该放在客户端渲染
        * 2.但是`SEO`在两者抉择中优先级更高，所以这里使用了服务端渲染